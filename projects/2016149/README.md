
# ΙΟΝΙΟ ΠΑΝΕΠΙΣΤΗΜΙΟ, ΤΜΗΜΑ ΠΛΗΡΟΦΟΡΙΚΗΣ 

## ΜΑΘΗΜΑ
### Κινητά και Κοινωνικά Μέσα  
Επιβλέπων καθηγητής: Χωριανόπουλος Κωνσταντίνος  

## Επιλογή Εργασίας   
### Corfu Map (https://github.com/ioniodi/corfu-map)
## Στοιχεία φοιτητή  
### Γεώργιος Μαντέλλος  
### ΑΜ: Π2016149  
### Application: https://geocfu.github.io/corfu-map/  
### APK: https://drive.google.com/open?id=1Ie76Ea0pYc90h9vIrDgCdW8XjFGzWggB
### Repository: https://github.com/geocfu/corfu-map  

## Σύνοψη  
&nbsp;&nbsp;&nbsp;&nbsp;Το θέμα της εργασίας είναι η συνεργατική χαρτογράφηση δρόμων για πεζούς στην πόλη της Κέρκυρας. Από την εργασία αναμένεται να μάθουμε να χρησιμοποιούμε πολύ καλά την γλώσσα προγραμματισμού javascript, το API της Google για χάρτες και την βάση δεδομένων Firebase. Με μια πρώτη ματία, η εργασία αναμένεται να είναι πολύ απαιτητική.

## Εισαγωγή  
&nbsp;&nbsp;&nbsp;&nbsp;Πιο συγκεκριμένα, μας δόθηκε ένα προσχέδιο κώδικα πάνω στο όποιο έπρεπε να αναπτύξουμε τα δυο πρώτα παραδοτέα. Ο σκοπός της εργασίας είναι να δημιουργήσουμε διαδρομές στην πόλη της Κέρκυρας και να τις βαθμολογήσουμε ανάλογα με την καταλληλότητα τους για πεζούς.  Έπειτα, να μετατρέψουμε την web εφαρμογή σε android εφαρμογή προσθέτοντας επιπλέον λειτουργικότητα. Στην συνέχεια παραθέτονται αναλυτικά ολοι οι συλογισμοί και το σκεπτικό που ειχα κατα την υλοποίηση.  

## Παραδοτέα
### Παραδοτέο 1  
- [x] Όταν ανοίγει η εφαρμογή να είναι κεντραρισμένη και εστιασμένη (zoom) στην πόλη της Κέρκυρας.  
- [x] Προστέθηκε κουμπί εναλλαγής της εμφάνισης ή μη του παραγόμενου GeoJSON string.  
- [x] Προστέθηκε λειτουργία διαγραφής του σχήματος το οποίο θα επιλέγει ο χρήστης(δεξί κλικ στο μονοπάτι), καθώς και λειτουργία διαγραφής όσων έχουν σχεδιαστεί πάνω στο χάρτη.   
- [x] Χρησιμοποιώντας τη γραμμή από το εργαλείο σχεδίασης της εφαρμογής (πάνω αριστερά) χαρτογραφήθηκαν οι δρόμοι όπως φαίνονται από την εικόνα δορυφόρου. Εγινε εξαγωγή του geojson αρχείου, ονομάστηκε ως εξής: 2016149.geojson και ανέβηκε στο κεντρικό αποθετήριο στον φάκελο data. Τέλος, τροποποιείθηκε ο κώδικας της εφαρμογής ώστε να "διαβάζεται" το αρχείο όταν ανοίγει η εφαρμογή και να εμφανίζονται τα μονοπάτια πάνω στο χάρτη (προστέθηκε ένα αντίγραφο του geojson αρχείου στον φάκελο data του αποθετηρίου).  
- [x] Δημιουργήθηκε ένα σύστημα αξιολόγησης (rating system) της καταλληλότητας των δρόμων για πεζούς με 5 διαβαθμίσεις (η default επιλογή είναι "unknown"). Ανάλογα με την αξιολόγηση του χρήστη(αριστερό κλικ στο μονοπάτι), ο κάθε δρόμος να λαμβάνει αντίστοιχο χρώμα. Το καινούριο χαρακτηριστικό αξιολόγησης (property) καταγράφεται στο GeoJSON αρχείο.  
- [x] Αξιολογήθηκαν τα μονοπάτια που γνωρίζα/θυμάμαι κατά πόσο είναι κατάλληλα/ευχάριστα για πεζούς και ανέβηκαν τα καινούρια αρχεία στο κεντρικό αποθετήριο στον φάκελο data με όνομα 2016149_review.geojson.  

### Παραδοτέο 2  
- [x] Προστέθηκε μία Βάση Δεδομένων Firebase στην οποία καταγράφονται τα σχεδιασμένα μονοπάτια και οι αξιολογήσεις.
- [x] Μετατράπηκε η εφαρμογή διαδικτύου (web app) σε εφαρμογή android. Ανέβάστε ο κώδικας της εφαρμογής σε ξεχωριστό repository και προστέθηκε υπερσύνδεσμος (σε υπηρεσία διαμοιρασμού αρχείων) για το εκτελέσιμο apk στην αναφορά.
- [x] Προστέθηκε στη νέα εφαρμογή λειτουργία εμφάνισης του μήκους του σχεδιασμένου δρόμου που επιλέγει ο χρήστης.
- [x] Τροποποιήθηκε η νέα εφαρμογή ώστε ο χρήστης να μην μπορεί να σχεδιάσει δρόμους οι οποίοι βρίσκονται πάνω από 100 μέτρα μακριά από την τρέχουσα τοποθεσία του.
- [x] Προστέθηκε η δυνατότητα αναγνώρισης (login) και καταγραφής των ενεργειών των χρηστών και εμφάνισης πίνακα κατάταξης (leaderboard) στον οποίο οι χρήστες θα κατατάσσονται ανάλογα με το συνολικό μήκος των μονοπατιών που έχουν καταγράψει.  

## Υλικό και Εργαλεία που χρησιμοποιήθηκαν  
&nbsp;&nbsp;&nbsp;&nbsp;Το site απο το οποίο άντλησα όλες τις πληροφορίες για το κομμάτι της χαρτογράφησης είναι το επίσημο site της Google για το documentation του API. Επιπλέον, το σιτε Stack Overflow βοήθησε αρκετά σε θέματα ανάπτυξης κώδικα.
- API Guides (https://developers.google.com/maps/documentation/javascript/tutorial)  
- API Reference (https://developers.google.com/maps/documentation/javascript/reference/3/)  
- API Samples (https://developers.google.com/maps/documentation/javascript/examples/)
- Stack Overflow (https://stackoverflow.com/questions/tagged/google-maps)  

&nbsp;&nbsp;&nbsp;&nbsp;Το site απο το οποίο άντλησα όλες τις πληροφορίες για το κομμάτι της βάσης δεδομένων firebase είναι το επίσημο site της Google για τη Firebase. Επίσης, το site Tutorialspoint με βοήθησε αρκετά στο κομμάτι πρόσβασης στη βαση δεδομένων.
- Firebase Guides (https://firebase.google.com/docs/web/setup)  
- Firebase Reference (https://firebase.google.com/docs/reference/js/)  
- Tutorialspoint (https://www.tutorialspoint.com/firebase/firebase_read_data.htm)  

&nbsp;&nbsp;&nbsp;&nbsp;Για την ανάπτυξη του κώδικα, χρησιμοποιήθηκε το εργαλείο ανάπτυξης κώδικα Atom, το οποίο είναι ανοιχτού κώδικα και διανέμεται δωρεάν.

- Atom text editor (https://atom.io/)  

## Μέθοδος Ανάπτυξης  
&nbsp;&nbsp;&nbsp;&nbsp;Για την ανάπτυξη του κώδικα χρησιμοποιήθηκε το εργαλείο ανάπτυξης κώδικα Atom. Σαν σκεπτικό ακολουθήθηκε το εξής. Προσπάθησα να χρησιμοποιήσω όσο μπορούσα περισσότερο μεθόδους απο το API της Google. Έτσι, αρχικά ξεκίνησα να επιλύω τα ζητούμενα του παραδοτέου. Στην πορεία όμως δεν μου άρεσε και πολύ η εμφάνιση των κουμπιών και γενικότερα η δομή του default style. Οπότε, εισήγαγα το framework bootstrap μέσω cdn. Έπειτα, κατά την συνέχεια των ερωτημάτων, χρειάστηκε να δημιουργήσω μια διεπαφή με τον χρήστη για ορισμένες ενέργειες όσον αφορά τα μονοπάτια. Για παράδειγμα, ο χρήστης έπρεπε να μπορεί είτε να δώσει μια βαθμολογία από το ένα μέχρι το 5 είτε να σβήνει την εκάστοτε διαδρομή. Έτσι εισήγαγα πάλι ένα νεο framework το bootbox. Το bootbox χρησιμοποιεί τα modals του bootstrap, αξιοποιώντας τα με τέτοιο τρόπο έτσι ώστε να δημιουργεί custom παράθυρα ειδοποιήσεων προκειμένου να προσφέρει μια πιο ωραία εμφανισιακά και καλύτερη χρηστικά εμπειρία στον χρήστη έναντι του κλασσικού παραθύρου ειδοποιήσεων. Κατά το τέλος του πρώτου παραδοτέου, σχεδιάστηκαν στον χάρτη 62 μονοπάτια. Από αυτά αξιολογήθηκαν περίπου τα 50.  
Έπειτα τροποποιήθηκε η εφαρμογή έτσι ώστε να δείχνει κατά την είσοδο του χρήστη όλες τις διαδρομές μαζί με τισ αντίστοιχες αξιολογήσεις τους. Στο δεύτερο παραδοτέο ωστόσο, άλλαξα αρκετά την εμφάνιση. Αρχικά, πρόσθεσα την βάση δεδομένων firebase. Στην συνέχεια, δημιούργησα μια φόρμα σύνδεσης στην πλατφόρμα μου. Ο χρήστης προτρέπεται να βάλει eimail και κωδικό για να συνδεθεί. Εάν δεν υπάρχει λογαριασμος με αυτο το email, αυτοματα, προσθετεται ενας καινουριος. Αφότου ο χρήστης έχει συνδεθεί στην εφαρμογή με τον προσωπικό του λογαριασμό, παραθέτεται μπροστά του ο χάρτης με τα προσχεδιασμένα μονοπάτια. Μετά, πρόσθεσα ένα πλαϊνό μενού μεταφέροντας σε αυτό, όλα τα κουμπιά που υπήρχαν. Επιπλέον, δεν επιτρέπεται στον χρήστη να σχεδιάσει μονοπάτια τα οποία είναι εκτός ακτίνας 100 μέτρων από την τρέχουσα τοποθεσία του. Πρόσθεσα επίσης έναν πίνακα κατάταξης ο οποίος τραβάει δεδομένα σε πραγματικό χρόνο από την βάση δεδομένων firebase και τα εμφανίζει σε φθίνουσα σειρά. Έπειτα δίνεται η δυνατότητα στον χρήστη να αποσυνδεθεί. Επιπλέον, αυτόματα καταγράφεται το συνολικό μήκος των διαδρομών που υπάρχουν στον χάρτη και στέλνεται στην βάση. Όσον αφορά την εφαρμογή στο android, ουσιαστικά, μετέτρεψα την εφαρμογή διαδικτύου σε εφαρμογή android, κάνοντας χρήση του χαρακτηριστικού webview. Έτσι δείχνω με έναν δικό μου τρόπο την ιστοσελίδα, στο κινητό. Έτσι καταφέρνω και να αξιοποιώ χαρακτηριστικά που έχω ήδη φτιάξει, και να παραθέτω στον χρήστη την εμπειρία μιας native android εφαρμογής. Η μόνη διαφορά στην android εφαρμογή, είναι οτι δεν επιτρέπεται στους χρήστες να κατεβάσουν το .geojson αρχείο.  

### Βελτιώσεις που θα μπορουσαν να προστεθούν
- [ ] Κατά την είσοδο στην εφαρμογή, θα μπορούσε να εμφανίζει τα μονοπάτια όλων των χρηστών.  
- [ ] Θα μπορούσαν οι αξιολογήσεις να αθροίζονται και το τελικό χρώμα να προκύπτει από τον μέσο όρο τους.

## Στιγμιότυπα οθόνης για την Web και την Android εφαρμογή  
### Web App
Login screen screenshot
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/corfu_map_login_screenshot.png)  

Map screenshot  
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/corfu_map_map.png)  

Complete Map screenshot  
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/corfu_map_map_menu_geojsonoutput.png)  

### Android App
Login screen screenshot
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/Screenshot_2018-05-07-22-10-40.png)  

Menu screenshot  
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/Screenshot_2018-05-07-22-11-35.png)  

Map screenshot  
![screenshot](https://github.com/geocfu/cscw/blob/2016149/projects/2016149/Screenshot_2018-05-07-22-11-47.png)  

## Συμπεράσματα  
&nbsp;&nbsp;&nbsp;&nbsp;Σαν εργασία, μπορώ να πω με σιγουριά, πως είναι η πιο δύσκολη που έχω αντιμετωπίσει ως τώρα, εντός ακαδημαϊκού περιβάλλοντος. Αποτελεί ένα εξαιρετικό έναυσμα προκειμένου να ασχοληθεί κανείς με Javascript, Google Maps Web API, την βάση δεδομένων firebase και την δημιουργία android εφαρμογών.

## Σελίδα Τελικής Αναφοράς  
### https://geocfu.github.io/cscw-report/

## Bonus Βαθμός  
### Peers on Map, Email: geocfupom@gmail.com

